<!DOCTYPE html>
<html>

<head>
  <meta charset='UTF-8'>
  <title>Analog</title>
</head>

<body>
  <div class='app'>

    <div class='ticker-container'>
      <div>
        <span class='ticker-duration'></span>
      </div>
    </div>

    <div class='dashboard-container'>
    </div>

    <div class="form-container">
    </div>

  </div>

  <script>
    // PS: all objects declared here are accessible in the section scripts

    // electron deps
    const { remote, ipcRenderer: ipc } = require('electron')

    // remote refs
    const { analog } = remote.require('./main.js')

    // mount renderer scripts
    const Dashboard = require('./renderer/sections/Dashboard')
    new Dashboard('dashboard').mount()
    const Ticker = require('./renderer/sections/Ticker')
    new Ticker('ticker').mount()
    const Form = require('./renderer/sections/Form')
    new Form('form').mount()

    // reload on F5 or Cmd+R press 
    const { getCurrentWindow, globalShortcut } = remote;

    const reload = () => {
      getCurrentWindow().reload()
    }

    globalShortcut.register('F5', reload);
    globalShortcut.register('CommandOrControl+R', reload);

    window.addEventListener('beforeunload', () => {
      globalShortcut.unregister('F5', reload);
      globalShortcut.unregister('CommandOrControl+R', reload);
    })

</script>

</body>

</html>
